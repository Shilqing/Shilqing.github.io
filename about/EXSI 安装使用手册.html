<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Rational | Rational</title><meta name="author" content="Rational"><meta name="copyright" content="Rational"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="EXSI 安装使用手册EXSI虚拟机操作手册 编制人：郭石磊 目  录 1、简介	3 1.1 目的	3 1.2 适用对象	3 2、配置要求	3 2.1 硬件和系统资源	3 3、ESXI程序安装	3 3.1 ESXI安装	3 3.2 ESXI网络配置	8 4、ESXI程序内安装虚拟机	11 4.1 安装虚拟机需要准备的文件	11 4.2 虚拟机安装步骤	11 4.3 克隆虚拟机	20  1、简介">
<meta property="og:type" content="website">
<meta property="og:title" content="Rational">
<meta property="og:url" content="https://shilq.top/about/EXSI%20%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C.html">
<meta property="og:site_name" content="Rational">
<meta property="og:description" content="EXSI 安装使用手册EXSI虚拟机操作手册 编制人：郭石磊 目  录 1、简介	3 1.1 目的	3 1.2 适用对象	3 2、配置要求	3 2.1 硬件和系统资源	3 3、ESXI程序安装	3 3.1 ESXI安装	3 3.2 ESXI网络配置	8 4、ESXI程序内安装虚拟机	11 4.1 安装虚拟机需要准备的文件	11 4.2 虚拟机安装步骤	11 4.3 克隆虚拟机	20  1、简介">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://qzonestyle.gtimg.cn/qzone/qzactStatics/imgs/20171123181522_c48800.jpg">
<meta property="article:published_time" content="2024-05-29T08:53:53.606Z">
<meta property="article:modified_time" content="2024-05-29T08:53:53.580Z">
<meta property="article:author" content="Rational">
<meta property="article:tag" content="博客，兔子">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://qzonestyle.gtimg.cn/qzone/qzactStatics/imgs/20171123181522_c48800.jpg"><link rel="shortcut icon" href="/./img/favicon.png"><link rel="canonical" href="https://shilq.top/about/EXSI%20%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Rational',
  isPost: false,
  isHome: false,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-05-29 16:53:53'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/css/font-awesome-animation.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "/img/loading.gif" data-lazy-src="/./img/avater.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home  faa-bounce animated"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/echo/"><i class="fa-fw icon-love-sign"></i><span> 📑Echo</span></a></li></ul></div></div></div></div><div class="page" id="body-wrap"><header class="not-home-page" id="page-header" style="background-image: url('https://qzonestyle.gtimg.cn/qzone/qzactStatics/imgs/20171123181522_c48800.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Rational</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home  faa-bounce animated"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group hide" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li><li><a class="site-page child" href="/echo/"><i class="fa-fw icon-love-sign"></i><span> 📑Echo</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="page-site-info"><h1 id="site-title">Rational</h1></div></header><main class="layout" id="content-inner"><div id="page"><div id="article-container"><h1 id="EXSI-安装使用手册"><a href="#EXSI-安装使用手册" class="headerlink" title="EXSI 安装使用手册"></a>EXSI 安装使用手册</h1><p>EXSI虚拟机操作手册</p>
<p>编制人：郭石磊</p>
<p>目  录</p>
<p>1、简介	3</p>
<p>1.1 目的	3</p>
<p>1.2 适用对象	3</p>
<p>2、配置要求	3</p>
<p>2.1 硬件和系统资源	3</p>
<p>3、ESXI程序安装	3</p>
<p>3.1 ESXI安装	3</p>
<p>3.2 ESXI网络配置	8</p>
<p>4、ESXI程序内安装虚拟机	11</p>
<p>4.1 安装虚拟机需要准备的文件	11</p>
<p>4.2 虚拟机安装步骤	11</p>
<p>4.3 克隆虚拟机	20</p>
<p> 1、简介 </p>
<p>ESXi专为运行虚拟机、最大限度降低配置要求和简化部署而设计。只需几分钟时间，客户便可完成从安装到运行虚拟机的全过程，特别是在下载并安装预配置虚拟设备的时候。</p>
<p>在VMware Virtual Appliance Marketplace 上有800多款为VMware hypervisor 创建的虚拟设备，如今，ESXi已经实现了与Virtual Appliance Marketplace的直接整合，使用户能够即刻下载并运行虚拟设备。这为即插即用型软件的交付与安装提供了一种全新和极其简化的方式。</p>
<p> 1.1 目的 </p>
<p>整合硬件，以实现更高的容量利用率，提升性能，以获得竞争优势，通过集中管理功能精简 IT 管理，降低 CAPEX 和 OPEX，最大限度地减少运行 hypervisor 所需的硬件资源，进而提高效率。</p>
<p> 1.2 适用对象 </p>
<p>本文档适用于虚拟机安装及使用人员。</p>
<p> 2、配置要求 </p>
<p> 2.1 硬件和系统资源 </p>
<p>ESXi6.7 要求主机至少具有两个 CPU 内核。</p>
<p>ESXi6.7 支持 2006 年 9 月后发布的 64 位 x86 处理器。其中包括了多种多核处理器。</p>
<p>ESXi6.7 需要在 BIOS 中针对 CPU 启用 NX&#x2F;XD 位。</p>
<p>ESXi6.7 需要至少 4 GB 的物理 RAM。建议至少提供 8 GB 的 RAM，以便能够在典型生产环境下运行虚拟机。如果内存配置过低，在vSphere环境中将有很多功能不能使用，在这里建议你的ESXi6.7主机内存在12GB以上。</p>
<p>要支持 64 位虚拟机，x64 CPU 必须能够支持硬件虚拟化（Intel VT-x 或 AMD RVI）。</p>
<p>一个或多个千兆或更快以太网控制器。</p>
<p>SCSI 磁盘或包含未分区空间用于虚拟机的本地（非网络）RAID LUN。</p>
<p>对于串行 ATA (SATA)，有一个通过支持的 SAS 控制器或支持的板载 SATA 控制器连接的磁盘。SATA磁盘被视为远程、非本地磁盘。默认情况下，这些磁盘用作暂存分区，因为它们被视为远程磁盘。</p>
<p> 3、ESXI程序安装</p>
<p> 3.1 ESXI安装 </p>
<p>\1.  由于我使用的是U盘安装，开机启动项改为U盘启动，启动后直接进入安装界面（开机启动自行百度）。</p>
<p>\2. 程序启动后点击开启ESXI选项。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628546560-a1088d01-b3fb-4142-a97e-89cd4a730dc1.png?x-oss-process=image/format,webp" alt="img"></p>
<p>3．开始安装程序必须的软件。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628546810-c19a0532-0bdb-4da1-bbdf-b9cde3e0e811.png?x-oss-process=image/format,webp" alt="img"></p>
<p>4．安装该文件加载成功页面，正在加载其他必须模块。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628547042-262cf3d1-bd93-4efb-b669-ba03f9ecb77a.png?x-oss-process=image/format,webp" alt="img"></p>
<p>5．接下来进入ESXI安装导向，选择Enter键开始安装。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628547291-8ae8ce66-9a35-4403-a28b-32d691867ed4.png?x-oss-process=image/format,webp" alt="img"></p>
<p>6．按F11接受协议继续安装，进入扫描时间，提示需要等待一段时间</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628547522-6e0e40e3-33f8-4f05-8b8a-923adc07552f.png?x-oss-process=image/format,webp" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628547789-b6fb5597-de33-4ef1-b2d4-a3df60b81ac8.png?x-oss-process=image/format,webp" alt="img"></p>
<p>7．选择安装磁盘位置，选择好后按Enter继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628548006-027fcfc1-112e-4d51-9adc-fe41d0e3baf3.png?x-oss-process=image/format,webp" alt="img"></p>
<p>8．选择键盘安装，默认US Default按Enter键继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628548225-abb149bd-3c0e-4c29-ab11-e67d29b0dd31.png?x-oss-process=image/format,webp" alt="img"></p>
<p>9．输入root用户的密码，按Enter继续（密码可以为空）。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628548447-a4ad43d8-2e1c-4824-93da-cd4679004ece.png?x-oss-process=image/format,webp" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628548664-69192ea9-49b7-4979-9d1f-f53e6979ab51.png?x-oss-process=image/format,webp" alt="img"></p>
<p>10．进入扫描页面，提示需要等待一段时间。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628548879-6f55662a-1d88-4726-a4a3-abddd0018f7e.png?x-oss-process=image/format,webp" alt="img"></p>
<p>11．提示磁盘将被重新分区，直接按F11安装即可。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628549147-0cfcf6c2-0078-4132-849b-2f5616691644.png?x-oss-process=image/format,webp" alt="img"></p>
<p>12．安装进行中，大约五分钟。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628549340-1fb04a95-f2f8-41b7-ab32-504f27f254b9.png?x-oss-process=image/format,webp" alt="img"></p>
<p>13．安装完成，点击回车即可重启，等待重启完成。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628549564-84fcc561-a569-49eb-a14a-654c56cbd1a4.png?x-oss-process=image/format,webp" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628549799-b1c302b8-eb73-440d-b3bb-60226ab18b40.png?x-oss-process=image/format,webp" alt="img"></p>
<p> 3.2 ESXI网络配置 </p>
<p>1．重启后已经自动分配动态的IP地址，下面配置静态IP，按F2进入。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628550090-7e02f453-3772-40da-85c7-e713486110b0.png?x-oss-process=image/format,webp" alt="img"></p>
<p>\2. 输入root密码，按Enter继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628550480-fce97822-0d99-4046-8f53-650c97cd2604.png?x-oss-process=image/format,webp" alt="img"></p>
<p>3.选择Configure Management Network按Enter继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628550797-1772f400-bca5-4ebb-bded-b1d8fe5d98db.png?x-oss-process=image/format,webp" alt="img"></p>
<p>4.选择Network Adapters，确定选择某张网卡进行配置，按Enter继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628551054-d5dc0750-f445-4d08-9a8d-b17c76908615.png?x-oss-process=image/format,webp" alt="img"></p>
<p>5.默认情况下一班是vmnic0,按Enter键继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628551263-58c4a1f0-28a4-4d11-9127-3fb04f61bc8f.png?x-oss-process=image/format,webp" alt="img"></p>
<p>6.选择IPV4 Configuration，按Enter进入；选择Set static IPv4 address and network configuration将其设置为静态，设置IP地址，子网掩码，默认网关，按Enter继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628551515-b501cf36-7b67-458d-ac03-d57219b00bce.png?x-oss-process=image/format,webp" alt="img"></p>
<p>7.按ESC进入当前页面，系统会询问是否确定修改管理网络配置，确定按Y继续。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628551817-1a8dd261-d3c9-4c80-bc8d-1ef3beb1d2cc.png?x-oss-process=image/format,webp" alt="img"></p>
<p>8.管理IP配置完成，右侧显示为现在的静态IP地址。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628552026-818cb0aa-1cb1-4124-b904-b45cf52c8e4c.png?x-oss-process=image/format,webp" alt="img"></p>
<p>9.按F12重启，可以看到此时IP地址就是你配置的那个IP地址，而且是静态static，此时ESXI安装完成。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628552239-c300fbc7-1e76-4553-9501-bbbcfcf0d6b3.png?x-oss-process=image/format,webp" alt="img"></p>
<p> 4、ESXI程序内安装虚拟机 </p>
<p> 4.1 安装虚拟机需要准备的文件 </p>
<p>1ESXI软件</p>
<p>2虚拟机系统安装镜像</p>
<p> 4.2 虚拟机安装步骤 </p>
<p>1从ESXI6.0版本以后，就开始通过web浏览器的形式来管理。因此现在只需要一个浏览器，直接登录ESXI的web界面即可。如下图中所示，在浏览器中输入安装好的ESXI的管理地址，比如我的ESXI地址是：192.168.1.127，输入IP后回车，就自动跳转到ESXI管理解密，然后输入账号密码登录。   </p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628552489-ff6054dd-f21e-4c28-8473-bb2d96f28a96.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1登录后的界面如下两张图所示，左边是ESXI主机的资源，包括ESXI上已创建的的虚拟机，ESXI上的硬盘存储空间和ESXI管理的网络几口。而右边的内容是ESXI主机的信息等。点击上面的虚拟机创建按钮。开始进入创建虚拟机流程。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628552799-f634a797-0b33-496c-b9c1-9c82876b9025.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628553008-23837471-180b-4319-9e62-2c9583273e89.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1第一步，创建类型，在创建类型里选择创建新的虚拟机，然后点击下一页</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628553216-b3d03a75-afb2-412d-8458-b53b80c84e03.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>。</p>
<p>1第二部需要我们填写虚拟机的名称机虚拟机的类型。虚拟机的信息和类型可以通过下拉菜单选择，我们这里要安装linux系统，因此第二个选项选择linux，第三个选项选择CentOS7（安装任何系统根据自身需求，这里我们展示的示例为Linux）。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628553433-f281406a-b788-4a15-b20d-d6e18c95c355.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628553665-a2be1999-a89e-4a29-9579-a55194c548af.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1所有选项都选择好以后，如下面图中所示，确认无误后点击下一页。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628553870-70bca79d-e26a-4286-bf3a-412317dbc9b9.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1第三部需要选择你的虚拟机存储位置。也就是把你的虚拟机放到哪个硬盘上，默认情况下都会放在存储空间比较大的硬盘上，因为虚拟机会随着使用时间的增加，空间占用越来越大。我这里就选择的是14.55T的这个存储，选择好以后点击下一页。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628554138-d67d3cc2-c9ea-4e2d-96d7-6ba68b194fe0.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1第四步开始确认虚拟机的配置，首先来选择CPU，内存和硬盘的大小。这里我给的空间大小是8核CPU，16G内存，200G硬盘一个，500G硬盘一个。硬件配置好以后，再来添加虚拟机的引导设置。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628554471-e0b0d0f4-5f1f-41d6-a2a9-0e177801fd7d.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1虚拟机的引导指的是从哪个位置启动，就像我们平时在台式机安装系统时，可以从U盘启动，也可以从光盘启动。我们把滚动条往下拉，可以看到CD字样，这里就是给虚拟机一个虚拟的光驱。点击旁边的下拉按钮，可以看到有个数据存储ISO文件。点击进去。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628554714-995889ac-21b2-4154-8bdc-18492a4d415a.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1这个时候就会弹出文件存储浏览器，就可以看到你在ESXI主机的硬盘上存放的文件。如下面图中所示，我放了两个镜像，一个是CentOS-7.4的安装镜像，一个是windows系统的安装镜像，这里我要安装的是Linux系统，因此选择CentOS-7.4。如果说你没有在ESXI的硬盘里放镜像，那么可以点击左上角的那个上载按钮，从你的电脑上把系统的安装镜像上传上去。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628554947-21ad2f1c-a975-4a24-9f84-c0edcebcf744.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1点击镜像名称，然后镜像的信息会在右边显示出来，然后点击右下角的选择按钮。就回到了主机的配置页面，这个时候CD&#x2F;DVD驱动器的信息就变成了ISO文件那个。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628555182-4c1786e1-6c83-43bd-b49f-e020ee8b84b1.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628555392-bc677e45-4ae3-4f52-b7ac-5f6bc9c25807.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1点击下一页，最后一次确认虚拟机的信息后，点击完成。虚拟机就创建完成了。但是创建完成了不代表虚拟机弄好了，因为你的虚拟机还没装系统。不安装系统，你的虚拟机就无法使用。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628555634-28dff409-2577-4efe-a8f1-46d297ca70ee.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1配置完成后会回到虚拟机的管理页面，我们就能看到创建好的虚拟机，点击虚拟机名称，就进入到虚拟机的详情页面。这个页面中我们可以看到我们配置好的虚拟机的各种硬件信息。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628555832-14d5b4cd-4486-4568-acd1-f5f98e9ff898.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628556047-88fcf04b-ef04-41d5-b0e6-437051a71e07.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1点击上面的打开电源按钮，相当于虚拟机开机。这个时候旁边的黑色小窗口里面开始显示开机信息，就像我们的显示器一样。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/jpeg/38992335/1695628556287-40c0e1c8-afa3-42d6-a70d-13eb8951f666.jpeg?x-oss-process=image/format,webp/interlace,1" alt="img"></p>
<p>1点击那个小窗口，它会自动放大，就像显示器变大了一样。窗口里面就开始显示开机之后的动作，下面图中第一张图是选择安装系统的选项，安装什么系统取决于需要什么系统，接下来安装系统就自行百度吧。</p>
<p> 4.3 克隆虚拟机 </p>
<p>1首先选中你想要克隆的这台虚拟机，关闭这台虚拟机的电源后，选中虚拟机，右键选择导出。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628556531-d75bce6e-e6c0-464f-883a-cd9587b3760c.png?x-oss-process=image/format,webp" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628556754-cd4c2f6a-9e9b-47d4-9d1b-635a22ba82e9.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1导出后你会得到三个分别为VMDK格式、MF格式、OVF格式的文件。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628557150-abb08754-ad9b-4e63-b999-2b029c828d09.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1接下来我们拿到三个文件后在ESXI页面新建虚拟机，选择从OVF或OVA文件部署虚拟机后点击下一步。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628557375-2476f5ad-1065-43d1-9cab-758f42b7a8a0.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1先输入克隆的新虚拟机名称，然后导入刚刚通过导出拿到的三个文件后点击下一步。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628557635-b8127888-c893-472f-8d01-de70c36e268d.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1选择新虚拟机要存储的硬盘位置。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628558026-2349354b-eabf-4440-9b3e-6928dc04892b.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1部署选项默认就可以，点击下一步。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628558281-4a8f79d4-5d61-48bc-9f8a-b01aa5ac3a8a.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1展示你配置的信息，点击完成。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628558640-3894d294-4d49-495a-b0dd-60d3d72b75c3.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1等待虚拟机自动安装，安装过程中不能刷新页面，安装时间大约半个小时，安装结束后在虚拟机界面就可以看到你刚刚克隆完成的虚拟机。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628558878-493f3d20-fbf6-49c5-9b2b-82c53cffd0a3.png?x-oss-process=image/format,webp" alt="img"></p>
<p> 5、ESXI安装特别注意 </p>
<p> 5.1 安装系统无法识别PCI </p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628559158-14add9ad-b4d5-4371-a6e2-e9d31ddd0e39.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1安装的虚拟机，如果在添加PCI设备时候无法识别，或者可以识别，但是加入设备后虚拟机无法启动，通过修改配置项来解决</p>
<p>2在安装操作系统时候，引导选项中的固件使用EFI方式进行安装。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628559390-f1fe8b09-0aa6-4d4d-a928-16c30f1cd502.png?x-oss-process=image/format,webp" alt="img"></p>
<p>1在VM的VXM文件中添加两个数值，修改文件的位置在虚拟机选项，第一个数值是pciPassthru.use64bitMMIO&#x3D;”TRUE”，第二个数值为 pciPassthru.64bitMMIOSizeGB&#x3D;“128”，并且把管理》硬件》PCI设备中的nVidia Corporation 3D controller通过切换直通，使直通的值为活动</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628559652-02bad0da-12cd-4229-b482-14fdf568047b.png?x-oss-process=image/format,webp" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628559894-cfee633e-def8-4a30-b6be-a4d1e5231685.png?x-oss-process=image/format,webp" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628560151-6c931614-f806-43a6-87ca-0289f1ce117e.png?x-oss-process=image/format,webp" alt="img"></p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628560382-9c4e308a-8fc2-48ae-93dd-5dcab6bf7a16.png?x-oss-process=image/format,webp" alt="img"></p>
<p>在添加显卡后，建议勾选中 内存中预留锁定选项，避免出现启动centos7系统出现内存设置无效，：内存预留（sched,mem.Min）应该等于内存带下（xxxxx）</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://cdn.nlark.com/yuque/0/2023/png/38992335/1695628560572-ac3f0aed-72e3-4c9d-be2c-8a5389d8d4d6.png?x-oss-process=image/format,webp" alt="img"></p>
<p>Ps</p>
<p>To enable 64-bit Memory Mapped I&#x2F;O (MMIO) add this line to the virtual machine vmx file:</p>
<p>pciPassthru.use64bitMMIO&#x3D;”TRUE”</p>
<p>Memory Mapped I&#x2F;O (MMIO)大小调整：建议调整为（n*GPU显存）向上舍入到下一个2次幂。</p>
<p>示例：pciPassthru.64bitMMIOSizeGB &#x3D;”64”</p>
<p>两个16G显存GPU，2 x 16 GB &#x3D; 32，将 32 GB 向上舍入到下一个 2 次幂，所需的内存量为 64 GB。</p>
<p>三个16G显存GPU，3 x 16 GB &#x3D; 48，将 48 GB 向上舍入到下一个 2 次幂，所需的内存量为 64 GB。</p>
<p>或者直接设置为虚拟机分配的所有GPU显存大小的两倍，2<em>n</em>GPU显存（单位为GB）</p>
<p>虚拟机内存最小值建议为分配的所有GPU显存总大小的1.5倍。</p>
<p>s</p>
</div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "/img/loading.gif" data-lazy-src="/./img/avater.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Rational</div><div class="author-info__description">Hi~</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:1916575903@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Welcome to my Blog</div><div class="twopeople"><div class="twopeople"><div class="container"style="height:200px;"><canvas class="illo"width="800"height="800"style="max-width: 200px; max-height: 200px; touch-action: none; width: 640px; height: 640px;"></canvas></div><script src="https://cdn.jsdelivr.net/combine/npm/hexo-beautiful-page@latest/lib/onepeople.min.js,npm/hexo-beautiful-page@latest/lib/zdog.min.js,npm/hexo-beautiful-page@latest/lib/twopeople.min.js"></script><style>.twopeople{margin:0;align-items:center;justify-content:center;text-align:center}.illo{display:block;margin:0 auto;cursor:url("https://cdn.jsdelivr.net/gh/milkdue/cursors@latest/ori/move.cur"), auto !important;}</style></div></div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/27263.html" title="Pigx 、JeecgBoot微服务部署"><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/Shilqing/images/raw/master/202407171454250.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pigx 、JeecgBoot微服务部署"/></a><div class="content"><a class="title" href="/posts/27263.html" title="Pigx 、JeecgBoot微服务部署">Pigx 、JeecgBoot微服务部署</a><time datetime="2024-07-01T00:37:00.000Z" title="发表于 2024-07-01 08:37:00">2024-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/39282.html" title="Nginx配置后台运行"><img src= "/img/loading.gif" data-lazy-src="https://qzonestyle.gtimg.cn/qzone/qzactStatics/imgs/20171122191603_896cd9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nginx配置后台运行"/></a><div class="content"><a class="title" href="/posts/39282.html" title="Nginx配置后台运行">Nginx配置后台运行</a><time datetime="2024-01-16T06:37:00.000Z" title="发表于 2024-01-16 14:37:00">2024-01-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/12025.html" title="如何超越大多数人 --陈皓"><img src= "/img/loading.gif" data-lazy-src="https://qzonestyle.gtimg.cn/qzone/qzactStatics/imgs/20171123181522_c48800.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何超越大多数人 --陈皓"/></a><div class="content"><a class="title" href="/posts/12025.html" title="如何超越大多数人 --陈皓">如何超越大多数人 --陈皓</a><time datetime="2023-12-22T15:37:00.000Z" title="发表于 2023-12-22 23:37:00">2023-12-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2555.html" title="谈谈我的“三观” --陈皓"><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/Shilqing/images/raw/master/202407171459986.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="谈谈我的“三观” --陈皓"/></a><div class="content"><a class="title" href="/posts/2555.html" title="谈谈我的“三观” --陈皓">谈谈我的“三观” --陈皓</a><time datetime="2023-12-21T12:37:00.000Z" title="发表于 2023-12-21 20:37:00">2023-12-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/9442.html" title="Kvm虚拟化部署和使用"><img src= "/img/loading.gif" data-lazy-src="https://gitee.com/Shilqing/images/raw/master/202407171440308.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Kvm虚拟化部署和使用"/></a><div class="content"><a class="title" href="/posts/9442.html" title="Kvm虚拟化部署和使用">Kvm虚拟化部署和使用</a><time datetime="2023-01-14T00:37:00.000Z" title="发表于 2023-01-14 08:37:00">2023-01-14</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Hexo/"><span class="card-category-list-name">Hexo</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Linux%E8%BF%90%E7%BB%B4/"><span class="card-category-list-name">Linux运维</span><span class="card-category-list-count">8</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E8%BD%AC%E8%BD%BD/"><span class="card-category-list-name">转载</span><span class="card-category-list-count">2</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/keepalived/" style="font-size: 1.15em; color: rgb(25, 102, 111)">keepalived</a><a href="/tags/Pigx-%E3%80%81JeecgBoot/" style="font-size: 1.15em; color: rgb(197, 196, 59)">Pigx 、JeecgBoot</a><a href="/tags/Hello-world/" style="font-size: 1.15em; color: rgb(74, 4, 164)">Hello world</a><a href="/tags/Kvm/" style="font-size: 1.15em; color: rgb(121, 114, 107)">Kvm</a><a href="/tags/PXE-Kickstart/" style="font-size: 1.15em; color: rgb(8, 4, 171)">PXE+ Kickstart</a><a href="/tags/pdsh/" style="font-size: 1.15em; color: rgb(117, 45, 4)">pdsh</a><a href="/tags/Nginx/" style="font-size: 1.15em; color: rgb(2, 41, 64)">Nginx</a><a href="/tags/%E9%9B%86%E7%BE%A4%E5%85%8D%E5%AF%86%E4%BA%92%E8%AE%BF/" style="font-size: 1.15em; color: rgb(162, 128, 186)">集群免密互访</a><a href="/tags/LVS/" style="font-size: 1.15em; color: rgb(50, 27, 69)">LVS</a></div></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">11</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2022-10-23T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-07-17T07:10:38.806Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://cdn.jsdelivr.net/gh/Shilqing/gallery/img/202407030914338.webp')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2024  <i id="heartbeat" class="fa fas fa-heartbeat"></i> Rational</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><script src="js/Rational.js"></script><div class="aplayer no-destroy" data-id="7713407142" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="false"> </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>